{"title":"XML文件或者字符串转Bean对象","slug":"XML文件或者字符串转Bean对象","date":"2023-03-20T03:29:56.000Z","updated":"2025-03-21T02:17:35.760Z","comments":true,"path":"api/articles/XML文件或者字符串转Bean对象.json","excerpt":null,"covers":["/2023/03/20/XML%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACBean%E5%AF%B9%E8%B1%A1/image-20230320113703469.png","/2023/03/20/XML%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACBean%E5%AF%B9%E8%B1%A1/image-20230320113646010.png"],"content":"<blockquote>\n<p>需要的xml文件</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">myDocument</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">desc</span>&gt;</span>sky<span class=\"tag\">&lt;/<span class=\"name\">desc</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">myPerson</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">person</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sky1&quot;</span> <span class=\"attr\">age</span>=<span class=\"string\">&quot;18&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">person</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sky2&quot;</span> <span class=\"attr\">age</span>=<span class=\"string\">&quot;19&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">myPerson</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">myDocument</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>基本步骤</p>\n</blockquote>\n<ol>\n<li>定义好各个xml元素对应的javabean，在类上加注解@XmlRootElement(name &#x3D; “xxx”)</li>\n<li>在各个子元素对应的java字段上（如desc、myPerson）加注解 @XmlElement(name &#x3D; “xxx”)</li>\n<li>其中person的xml标签比较特殊，具有name和age这2个属性，需要做特殊处理：不能直接在name字段上加注解，而是需要先建立set或者get方法，在方法上加注解@XmlAttribute(name &#x3D; “xxx”)</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@XmlRootElement(name = &quot;myDocument&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyDocument</span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@XmlElement(name = &quot;desc&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\">    <span class=\"meta\">@XmlElement(name = &quot;myPerson&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyPerson myPerson;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@XmlRootElement(name = &quot;person&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Person</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\">    <span class=\"meta\">@XmlAttribute(name = &quot;name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@XmlAttribute(name = &quot;age&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAge</span><span class=\"params\">(<span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@XmlRootElement(name = &quot;myPerson&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyPerson</span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@XmlElement(name = &quot;person&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Person&gt; person;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>测试：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestXml</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">xml</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;utf-8\\&quot;?&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&lt;myDocument&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    &lt;desc&gt;sky&lt;/desc&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    &lt;myPerson&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;        &lt;person name=\\&quot;sky1\\&quot; age=\\&quot;18\\&quot;/&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;        &lt;person name=\\&quot;sky2\\&quot; age=\\&quot;19\\&quot;/&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    &lt;/myPerson&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&lt;/myDocument&gt;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">JAXBContext</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> JAXBContext.newInstance(MyDocument.class);</span><br><span class=\"line\">        <span class=\"type\">Unmarshaller</span> <span class=\"variable\">unmarshaller</span> <span class=\"operator\">=</span> context.createUnmarshaller();</span><br><span class=\"line\">        <span class=\"type\">StringReader</span> <span class=\"variable\">sr</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StringReader</span>(xml);</span><br><span class=\"line\">        <span class=\"type\">MyDocument</span> <span class=\"variable\">myDocument</span> <span class=\"operator\">=</span> (MyDocument) unmarshaller.unmarshal(sr);</span><br><span class=\"line\">        System.out.println(myDocument);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/2023/03/20/XML%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACBean%E5%AF%B9%E8%B1%A1/image-20230320113703469.png\" class title=\"image-20230320113703469\">\n<p>图解：</p>\n<img src=\"/2023/03/20/XML%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACBean%E5%AF%B9%E8%B1%A1/image-20230320113646010.png\" class title=\"image-20230320113646010\">\n","more":"<blockquote>\n<p>需要的xml文件</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">myDocument</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">desc</span>&gt;</span>sky<span class=\"tag\">&lt;/<span class=\"name\">desc</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">myPerson</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">person</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sky1&quot;</span> <span class=\"attr\">age</span>=<span class=\"string\">&quot;18&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">person</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sky2&quot;</span> <span class=\"attr\">age</span>=<span class=\"string\">&quot;19&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">myPerson</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">myDocument</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>基本步骤</p>\n</blockquote>\n<ol>\n<li>定义好各个xml元素对应的javabean，在类上加注解@XmlRootElement(name &#x3D; “xxx”)</li>\n<li>在各个子元素对应的java字段上（如desc、myPerson）加注解 @XmlElement(name &#x3D; “xxx”)</li>\n<li>其中person的xml标签比较特殊，具有name和age这2个属性，需要做特殊处理：不能直接在name字段上加注解，而是需要先建立set或者get方法，在方法上加注解@XmlAttribute(name &#x3D; “xxx”)</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@XmlRootElement(name = &quot;myDocument&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyDocument</span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@XmlElement(name = &quot;desc&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\">    <span class=\"meta\">@XmlElement(name = &quot;myPerson&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyPerson myPerson;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@XmlRootElement(name = &quot;person&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Person</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\">    <span class=\"meta\">@XmlAttribute(name = &quot;name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@XmlAttribute(name = &quot;age&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAge</span><span class=\"params\">(<span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@XmlRootElement(name = &quot;myPerson&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyPerson</span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@XmlElement(name = &quot;person&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Person&gt; person;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>测试：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestXml</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">xml</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;utf-8\\&quot;?&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&lt;myDocument&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    &lt;desc&gt;sky&lt;/desc&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    &lt;myPerson&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;        &lt;person name=\\&quot;sky1\\&quot; age=\\&quot;18\\&quot;/&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;        &lt;person name=\\&quot;sky2\\&quot; age=\\&quot;19\\&quot;/&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    &lt;/myPerson&gt;\\n&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&lt;/myDocument&gt;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">JAXBContext</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> JAXBContext.newInstance(MyDocument.class);</span><br><span class=\"line\">        <span class=\"type\">Unmarshaller</span> <span class=\"variable\">unmarshaller</span> <span class=\"operator\">=</span> context.createUnmarshaller();</span><br><span class=\"line\">        <span class=\"type\">StringReader</span> <span class=\"variable\">sr</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StringReader</span>(xml);</span><br><span class=\"line\">        <span class=\"type\">MyDocument</span> <span class=\"variable\">myDocument</span> <span class=\"operator\">=</span> (MyDocument) unmarshaller.unmarshal(sr);</span><br><span class=\"line\">        System.out.println(myDocument);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/2023/03/20/XML%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACBean%E5%AF%B9%E8%B1%A1/image-20230320113703469.png\" class=\"\" title=\"image-20230320113703469\">\n<p>图解：</p>\n<img src=\"/2023/03/20/XML%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACBean%E5%AF%B9%E8%B1%A1/image-20230320113646010.png\" class=\"\" title=\"image-20230320113646010\">\n","categories":[{"name":"技术","path":"api/categories/技术.json"}],"tags":[{"name":"Java","path":"api/tags/Java.json"}]}